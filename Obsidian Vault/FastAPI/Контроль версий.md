```python
from fastapi import FastAPI, Header, Response, HTTPException,Query

from pydantic import BaseModel, field_validator,Field

from typing import Annotated

import re, datetime

  

MINIMUM_APP_VERSION = "0.0.2"

  

class CommonHeader(BaseModel):

    user_agent : str

    accept_language : str

    x_current_version : Annotated[str,Query(...,regex=r"^\d+\.\d+\.\d+$", example=MINIMUM_APP_VERSION)]

  

    @field_validator("x_current_version")

    @classmethod

    def check_version(cls, value : str) -> str:

        if value is None:

            raise HTTPException(status_code=400, detail= "Нет заголовка версии")

        pattern = r'^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)$'

        if not re.fullmatch(pattern,value):

            raise ValueError("Неверный формат версии")

        parts1 = list(map(int, value.split('.')))

        parts2 = list(map(int, MINIMUM_APP_VERSION.split('.')))

        for p1,p2 in zip(parts1, parts2):

            if p1 > p2:

                return value

            elif p1 < p2:

                raise ValueError("Требуется обновить приложение")

        return value

  

    @field_validator("accept_language")

    @classmethod

    def check_header(cls, value):

        if value is None:

            raise HTTPException(status_code=400, detail="Такого заголовка нет")

        pattern = r'^[a-z]{2,3}(-[A-Z]{2})?(;q=(0\.[0-9]{1,3}|1\.0{1,3}))?(,\s*[a-z]{2,3}(-[A-Z]{2})?(;q=(0\.[0-9]{1,3}|1\.0{1,3}))?)*$'

        if not re.fullmatch(pattern, value):

            raise ValueError("не соответсвие шаблону")

        return value

    @field_validator("user_agent")

    @classmethod

    def check_user(cls, value):

        if value is None :

            raise HTTPException(status_code=400, detail="Такого заголовка нет")

        return value

  
  

app = FastAPI()

  
  
  

@app.get("/headers")

def get_header(common_headers: Annotated[CommonHeader, Header()]):

    return {"User-Agent":common_headers.user_agent, "Accept-Language":common_headers.accept_language}

  

@app.get("/info")

def info(common_headers : Annotated[CommonHeader, Header()],response : Response):

    response.headers["X-Server-Time"] = datetime.datetime.now().isoformat()

    return{"message":"Добро пожаловать! Ваши заголовки успешно обработаны.","headers":common_headers}
```